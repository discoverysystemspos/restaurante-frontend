<!-- =========================================================================
    HEADER 
========================================================================= -->
<header>
    <div class="bg-header-dark py-2 px-3 mb-2">
        <h5 class="text-white m-0">CLIENTES</h5>
    </div>
    <ul class="nav nav-tabs px-3" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
            <a class="nav-link active" id="home-tab" data-bs-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true"><i class="bi-people" style="font-size: 1rem"></i> Administración de clientes </a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link text-success cursor" id="crear-tab" data-bs-toggle="modal" data-bs-target="#nuevoCliente"><i class="bi-person-plus" style="font-size: 1rem"></i> Nuevo Cliente </a>
        </li>
    </ul>
</header>
<!-- =========================================================================
    HEADER 
========================================================================= -->

<!-- =========================================================================
    BODY 
========================================================================= -->
<div class="tab-content mt-4 bg-light2" id="myTabContent">

    <!-- TAB 1 -->
    <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
        <div class="px-3">
            <!-- TITLE - SUBTITLE -->
            <div>
                <h5 class="text-dark">ADMINISTRACIÓN DE CLIENTES</h5>
                <p>Administra todos los clientes de tu negocio (crédito, facturación, etc) de forma centralizada.</p>
            </div>
            <!-- TITLE - SUBTITLE -->

            <!-- TABLE CLIENTS -->
            <div class="shadow-lg p-3 mb-5 rounded bg-white">

                <!-- CARGANDO -->
                <div *ngIf="cargando">
                    <div class="text-center p-4">
                        <div class="spinner-grow text-secondary" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                    </div>
                    <small class="text-muted">cargando...</small>
                </div>
                <!-- CARGANDO -->

                <div *ngIf="!cargando">
                    <div>
                        <div class="form-floating mb-2">
                            <span class="position-absolute top-50 start-90 translate-middle"><i class=" bi-search " style="font-size: 1rem "></i></span>
                            <input type="text" class="form-control" id="floatingInput" placeholder="Buscar Cliente" (keyup)="buscar(search.value)" #search>
                            <label for="floatingInput ">Buscar Cliente</label>
                        </div>
                    </div>

                    <div class="d-flex flex-wrap">

                        <div class="ms-auto text-end">
                            <div class="my-2">
                                <button class="btn btn-success btn-sm mr-2" data-bs-toggle="modal" data-bs-target="#updateExcel"> <i class="bi bi-file-earmark-excel"></i> Subir excel</button>
                                <button (click)="exportExcel()" class="btn btn-info btn-sm mr-2"> <i class="bi bi-cloud-arrow-down"></i> Exportar excel</button>
                            </div>
                        </div>
                    </div>

                    <div class="table-responsive ">
                        <table class="table table-borderless table-striped table-hover table-sm animated fadeIn ">
                            <thead class="border-bottom ">
                                <tr>
                                    <th class="text-muted " scope="col ">#</th>
                                    <th class="text-muted " scope="col " colspan="2 ">Nombres</th>
                                    <th class="text-muted " scope="col ">Cedula</th>
                                    <th class="text-muted " scope="col ">Email</th>
                                    <th class="text-muted " scope="col ">Telefono</th>
                                    <th class="text-muted " scope="col ">Dirección</th>
                                    <th class="text-muted " scope="col ">Departamento</th>
                                    <th class="text-muted " scope="col ">Codigo Postal</th>
                                    <th class="text-muted w100 " scope="col ">Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngIf="!sinResultados" class="text-center ">
                                    <th colspan="10" class="py-4">
                                        <h4 class="text-muted">Sin Resultados</h4>
                                    </th>
                                </tr>
                                <tr class="trHover" *ngFor="let cliente of clientes; let i=index ">
                                    <th *ngIf="desde===0 " scope="row ">{{ i + 1}}</th>
                                    <th *ngIf="desde> 0" scope="row">{{ (i + 1) + desde }}</th>
                                    <td colspan="2">
                                        {{ cliente.name }}
                                        <span *ngIf="!cliente.status" class="badge rounded-pill bg-danger">Eliminado</span>
                                    </td>
                                    <td>{{ cliente.cedula }}</td>
                                    <td>{{ cliente.email }}</td>
                                    <td>{{ cliente.phone }}</td>
                                    <td>{{ cliente.address }}</td>
                                    <td>{{ cliente.department }} <span *ngIf="cliente.city || cliente.department">-</span> {{ cliente.city }}</td>
                                    <td>{{ cliente.zip }}</td>
                                    <td class="text-center">
                                        <button type="button" (click)="credito(cliente, true)" class="btn btn-link p-1 text-warning" data-bs-toggle="modal" data-bs-target="#credito"><i class="bi-calendar-event" style="font-size: 0.9rem"></i></button>
                                        <button type="button" (click)="actualizarCliente(cliente)" class="btn btn-link p-1 text-primary" data-bs-toggle="modal" data-bs-target="#actualizarCLiente"><i class="bi-pen" style="font-size: 0.9rem"></i></button>
                                        <button type="button" (click)="borrarCliente(cliente.cid)" class="btn btn-link p-1 text-danger"><i class="bi-trash" style="font-size: 0.9rem"></i></button>
                                    </td>
                                </tr>
                            </tbody>

                        </table>

                    </div>

                    <!-- BTN SIGUIENTE Y ANTERIOR -->
                    <div class="row">
                        <div class="col col-md-4">
                            <small class="text-muted">Total de clientes: ({{totalClientes}})</small>
                            <small *ngIf="resultado !== 0" class="text-muted"> - (Resultados: {{ resultado }})</small>
                            <small *ngIf="desde !== 0" class="text-muted"> - (Desde el: {{ desde + 1}} Hasta el: {{ desde + clientes.length }})</small>
                        </div>

                        <div *ngIf="search.value.length === 0" class="col d-flex justify-content-end">
                            <button type="button" (click)="cambiarPagina(-10)" class="{{btnAtras}} btn btn-sm btn-dark btnW waves-effect waves-light px-3">Anterior</button>
                            <button type="button" (click)="cambiarPagina(10)" class="{{btnAdelante}} btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2">Siguiente</button>
                        </div>
                    </div>
                    <!-- BTN SIGUIENTE Y ANTERIOR -->

                </div>
            </div>
            <!-- TABLE CLIENTS -->



        </div>
    </div>
    <!-- TAB 1 -->

</div>
<!-- =========================================================================
    BODY 
========================================================================= -->
<!-- =========================================================================
    NUEVO CLIENTE  credito
========================================================================= -->
<div class="modal fade" id="nuevoCliente" tabindex="-1" aria-labelledby="nuevoClienteModal" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="nuevoClienteModal"><i class="bi-person-plus" style="font-size: 2rem"></i> Nuevo Cliente</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">


                <form id="newClientForm" autocomplete="off" [formGroup]="newClientForm" (ngSubmit)="crearCliente()">

                    <!-- =======================================================================
                        DATOS PERSONALES 
                    =========================================================================== -->
                    <h5 class="text-muted">Datos Personales</h5>

                    <div class="row mb-3">

                        <!-- Tipo de empresa ** -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="partyType" class="col-sm-auto col-form-label">Tipo de empresa</label>
                            <select formControlName="party_type" class="form-select" id="partyType" #partyType (change)="partyType.value" aria-label="Floating label select example">
                                <option value="PERSONA_NATURAL">Persona Natural</option>
                                <option value="PERSONA_JURIDICA" >Persona Juridica</option>
                            </select>
                        </div>

                        <!-- Nombre de la empresa -->
                        <div *ngIf="partyType.value === 'PERSONA_JURIDICA'" class="col-md-12 mb-3 px-md-1">
                            <label for="companyName">Nombre de la empresa </label>
                            <div class="form-floating">
                                <input id="companyName" formControlName="company_name" type="text" class="form-control text-capitalize" placeholder="Nombre de la empresa">
                                <label for="floatingInput">Nombre de la empresa </label>
                            </div>
                            <p *ngIf="campoValido('company_name')" class="mb-1 animated fadeIn text-danger"> <small>Este campo es obligatorio</small> </p>
                        </div>

                        <!-- Nombres de la persona natural -->
                        <div *ngIf="partyType.value === 'PERSONA_NATURAL'" class="col-md-12 mb-3 px-md-1">
                            <label for="firstName">Nombres de la persona natural </label>
                            <div class="form-floating">
                                <input id="firstName" formControlName="first_name" type="text" class="form-control text-capitalize" placeholder="Nombres de la persona natural">
                                <label for="floatingInput">Nombres de la persona natural </label>
                            </div>
                            <p *ngIf="campoValido('first_name')" class="mb-1 animated fadeIn text-danger"> <small>Este campo es obligatorio</small> </p>
                        </div>

                        <!-- Apellidos de la persona natural -->
                        <div *ngIf="partyType.value === 'PERSONA_NATURAL'" class="col-md-12 mb-3 px-md-1">
                            <label for="familyName">Apellidos de la persona natural </label>
                            <div class="form-floating">
                                <input id="familyName" formControlName="family_name" type="text" class="form-control text-capitalize" placeholder="Apellidos de la persona natural">
                                <label for="floatingInput">Apellidos de la persona natural </label>
                            </div>
                            <p *ngIf="campoValido('family_name')" class="mb-1 animated fadeIn text-danger"> <small>Este campo es obligatorio</small> </p>
                        </div>

                        <!-- TIPO DE DOCUMENTO -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="indentityType" class="col-sm-auto col-form-label">Tipo de documento</label>
                            <select formControlName="party_identification_type" class="form-select" id="indentityType" aria-label="Floating label select example">
                                <option value="NIT">NIT</option>
                                <option value="CC" selected>CC</option>
                                <option value="PASAPORTE" >PASAPORTE</option>
                                <option value="CE" >CE</option>
                                <option value="TE" >TE</option>
                                <option value="PEP" >PEP</option>
                                <option value="TI" >TI</option>
                                <option value="RC" >RC</option>
                                <option value="IE" >IE</option>
                                <option value="NIT_OTRO_PAIS" >Nit de otro pais</option>
                            </select>
                        </div>

                        <div class="col-md-6 px-md-1 ">

                            <div class="form-floating">
                                <input formControlName="cedula" type="text" class="form-control" placeholder="Cedula de ciudadania">
                                <label for="floatingInput">Cedula de ciudadania</label>
                            </div>

                        </div>
                    </div>

                    <div class="row mb-3">

                        <div class="col-md-6 px-md-1">

                            <div class="form-floating">
                                <input formControlName="email" type="email" class="form-control" placeholder="Email">
                                <label for="floatingInput">Email</label>
                            </div>

                        </div>
                        <div class="col-md-6 px-md-1">

                            <div class="form-floating">
                                <input formControlName="phone" type="text" class="form-control" placeholder="Telefono">
                                <label for="floatingInput">Telefono</label>
                            </div>

                        </div>
                    </div>

                    <!-- =======================================================================
                        DIRECCION
                    =========================================================================== -->
                    <h5 class="text-muted">DIRECCIÓN</h5>

                    <div class="row mb-3">

                        <div class="col-md-12 px-md-1">

                            <div class="form-floating">
                                <input formControlName="address" type="text" class="form-control" placeholder="Dirección">
                                <label for="floatingInput">Dirección</label>
                            </div>
                        </div>


                    </div>

                    <div class="row mb-3">

                        <!-- DEPARTAMENTO ** -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="departamentoS" class="col-sm-auto col-form-label">Departamento</label>
                            <select formControlName="department" class="form-select" id="departamentoS" #departmentSS (change)="searchCities(departmentSS.value)">
                                <option >Seleccionar Departamento</option>
                                <option *ngFor="let department of departments" [value]="department.departamento" >{{department.departamento}}</option>
                            </select>
                        </div>

                        <!-- CIUDAD ** -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="ciudadS" class="col-sm-auto col-form-label">Ciudad</label>
                            <select formControlName="city" class="form-select" id="ciudadS" aria-label="Floating label select example">
                                <option value="" selected>Seleccionar Ciudad</option>
                                <option *ngFor="let city of ListCities" [value]="city.ciudad" >{{city.ciudad}}</option>
                            </select>
                        </div>

                        <div class="col-md-2 px-md-1">

                            <div class="form-floating">
                                <input formControlName="zip" type="text" class="form-control" placeholder="ZIP">
                                <label for="floatingInput">ZIP</label>
                            </div>

                        </div>

                        <!-- REGIMEN -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="regimen" class="col-sm-auto col-form-label">Regimen</label>
                            <select formControlName="regimen" class="form-select" id="regimen" aria-label="Floating label select example">
                                <option value="SIMPLE">SIMPLE</option>
                                <option value="AUTORRETENEDOR" >AUTORRETENEDOR</option>
                                <option value="AGENTE_RETENCION_IVA" >AGENTE RETENCION IVA</option>
                                <option value="ORDINARIO" >ORDINARIO</option>
                                <option value="GRAN_CONTRIBUYENTE" >GRAN CONTRIBUYENTE</option>
                            </select>
                        </div>

                        <!-- TIPO DE IMPUESTO ** -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="taxLevel" class="col-sm-auto col-form-label">Tipo de impuesto</label>
                            <select formControlName="tax_level_code" class="form-select" id="taxLevel" aria-label="Floating label select example">
                                <option value="SIMPLIFICADO">SIMPLIFICADO</option>
                                <option value="RESPONSABLE_DE_IVA" >RESPONSABLE DE IVA</option>
                                <option value="NO_RESPONSABLE_DE_IVA" selected>NO RESPONSABLE DE IVA</option>
                                <option value="COMUN" >COMUN</option>
                            </select>
                        </div>

                    </div>

                    <div class="col-md-1 px-md-1">
                        <div class="col-md-4 px-md-1">
                            <div class="form-check mt-2">
                                <input formControlName="mayoreo" class="form-check-input" type="checkbox" value="" id="mayoreo">
                                <label class="form-check-label" for="mayoreo">
                                    Mayoreo
                                </label>
                            </div>
                        </div>

                        <div class="col-md-4 px-md-1">
                            <div class="form-check mt-2">
                                <input formControlName="contratista" class="form-check-input" type="checkbox" value="" id="contratista">
                                <label class="form-check-label" for="contratista">
                                    Contratista
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="text-danger mb-2">
                            <p *ngIf="campoValido('name')" class="mb-1 animated fadeIn">- El nombre es obligatorio</p>
                            <p *ngIf="campoValido('cedula')" class="mb-1 animated fadeIn">- La cedula de ciudadania es obligatoria</p>

                        </div>
                    </div>


                    <button type="submit" class="btn btnW waves-effect waves-ligth px-3 btn-primary">Guardar</button>
                </form>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>
<!-- =========================================================================
    NUEVO CLIENTE 
========================================================================= -->

<!-- =========================================================================
    ACTUALIZAR CLIENTE
========================================================================= -->
<div class="modal fade" id="actualizarCLiente" tabindex="-1" aria-labelledby="actualizarCLienteModal" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="actualizarCLienteModal"><i class="bi-pencil" style="font-size: 1rem"></i> Actualizar Cliente</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">


                <form action="" id="upClientForm" autocomplete="off" [formGroup]="upClientForm" (ngSubmit)="updateCLiente()">

                    <!-- =======================================================================
                        DATOS PERSONALES 
                    =========================================================================== -->
                    <h5 class="text-muted">Datos Personales</h5>

                    <div class="row mb-3">

                        <!-- Tipo de empresa ** -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="partyType" class="col-sm-auto col-form-label">Tipo de empresa</label>
                            <select formControlName="party_type" class="form-select" id="partyType" #partyTypeUp (change)="partyTypeUp.value" aria-label="Floating label select example">
                                <option value="PERSONA_NATURAL">Persona Natural</option>
                                <option value="PERSONA_JURIDICA" >Persona Juridica</option>
                            </select>
                        </div>

                        <!-- Nombre de la empresa -->
                        <div *ngIf="partyTypeUp.value === 'PERSONA_JURIDICA'" class="col-md-12 mb-3 px-md-1">
                            <label for="companyName">Nombre de la empresa </label>
                            <div class="form-floating">
                                <input id="companyName" formControlName="company_name" type="text" class="form-control text-capitalize" placeholder="Nombre de la empresa">
                                <label for="floatingInput">Nombre de la empresa </label>
                            </div>
                            <p *ngIf="campoValido('company_name')" class="mb-1 animated fadeIn text-danger"> <small>Este campo es obligatorio</small> </p>
                        </div>

                        <!-- Nombres de la persona natural -->
                        <div *ngIf="partyTypeUp.value === 'PERSONA_NATURAL'" class="col-md-12 mb-3 px-md-1">
                            <label for="firstName">Nombres de la persona natural </label>
                            <div class="form-floating">
                                <input id="firstName" formControlName="first_name" type="text" class="form-control text-capitalize" placeholder="Nombres de la persona natural">
                                <label for="floatingInput">Nombres de la persona natural </label>
                            </div>
                            <p *ngIf="campoValido('first_name')" class="mb-1 animated fadeIn text-danger"> <small>Este campo es obligatorio</small> </p>
                        </div>

                        <!-- Apellidos de la persona natural -->
                        <div *ngIf="partyTypeUp.value === 'PERSONA_NATURAL'" class="col-md-12 mb-3 px-md-1">
                            <label for="familyName">Apellidos de la persona natural </label>
                            <div class="form-floating">
                                <input id="familyName" formControlName="family_name" type="text" class="form-control text-capitalize" placeholder="Apellidos de la persona natural">
                                <label for="floatingInput">Apellidos de la persona natural </label>
                            </div>
                            <p *ngIf="campoValido('family_name')" class="mb-1 animated fadeIn text-danger"> <small>Este campo es obligatorio</small> </p>
                        </div>

                        <!-- TIPO DE DOCUMENTO -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="indentityType" class="col-sm-auto col-form-label">Tipo de documento</label>
                            <select formControlName="party_identification_type" class="form-select" id="indentityType" aria-label="Floating label select example">
                                <option value="NIT">NIT</option>
                                <option value="CC" selected>CC</option>
                                <option value="PASAPORTE" >PASAPORTE</option>
                                <option value="CE" >CE</option>
                                <option value="TE" >TE</option>
                                <option value="PEP" >PEP</option>
                                <option value="TI" >TI</option>
                                <option value="RC" >RC</option>
                                <option value="IE" >IE</option>
                                <option value="NIT_OTRO_PAIS" >Nit de otro pais</option>
                            </select>
                        </div>

                        <div class="col-md-6 px-md-1 ">

                            <div class="form-floating">
                                <input formControlName="cedula" type="text" class="form-control" placeholder="Cedula de ciudadania">
                                <label for="floatingInput">Cedula de ciudadania</label>
                            </div>

                        </div>
                    </div>

                    <div class="row mb-3">

                        <div class="col-md-6 px-md-1">

                            <div class="form-floating">
                                <input formControlName="email" type="email" class="form-control" placeholder="Email">
                                <label for="floatingInput">Email</label>
                            </div>

                        </div>
                        <div class="col-md-6 px-md-1">

                            <div class="form-floating">
                                <input formControlName="phone" type="text" class="form-control" placeholder="Telefono">
                                <label for="floatingInput">Telefono</label>
                            </div>

                        </div>
                    </div>

                    <!-- =======================================================================
                        DIRECCION
                    =========================================================================== -->
                    <h5 class="text-muted">DIRECCIÓN</h5>

                    <div class="row mb-3">

                        <div class="col-md-12 px-md-1">

                            <div class="form-floating">
                                <input formControlName="address" type="text" class="form-control" placeholder="Dirección">
                                <label for="floatingInput">Dirección</label>
                            </div>
                        </div>


                    </div>

                    <div class="row mb-3">

                        <!-- DEPARTAMENTO ** -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="departamentoS" class="col-sm-auto col-form-label">Departamento</label>
                            <select formControlName="department" class="form-select" id="departamentoS" #departmentSSUp (change)="searchCities(departmentSSUp.value)">
                                <option value="" >Seleccionar Departamento</option>
                                <option *ngFor="let department of departments" [value]="department.departamento" >{{department.departamento}}</option>
                            </select>
                        </div>

                        <!-- CIUDAD ** -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="ciudadS" class="col-sm-auto col-form-label">Ciudad</label>
                            <select formControlName="city" class="form-select" id="ciudadS" aria-label="Floating label select example">
                                <option value="" selected>Seleccionar Ciudad</option>
                                <option *ngFor="let city of ListCities" [value]="city.ciudad" >{{city.ciudad}}</option>
                            </select>
                        </div>

                        <div class="col-md-2 px-md-1">

                            <div class="form-floating">
                                <input formControlName="zip" type="text" class="form-control" placeholder="ZIP">
                                <label for="floatingInput">ZIP</label>
                            </div>

                        </div>

                        <!-- REGIMEN -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="regimen" class="col-sm-auto col-form-label">Regimen</label>
                            <select formControlName="regimen" class="form-select" id="regimen" aria-label="Floating label select example">
                                <option value="SIMPLE">SIMPLE</option>
                                <option value="AUTORRETENEDOR" >AUTORRETENEDOR</option>
                                <option value="AGENTE_RETENCION_IVA" >AGENTE RETENCION IVA</option>
                                <option value="ORDINARIO" >ORDINARIO</option>
                                <option value="GRAN_CONTRIBUYENTE" >GRAN CONTRIBUYENTE</option>
                            </select>
                        </div>

                        <!-- TIPO DE IMPUESTO ** -->
                        <div class="col-md-12 mb-3 px-md-1">
                            <label for="taxLevel" class="col-sm-auto col-form-label">Tipo de impuesto</label>
                            <select formControlName="tax_level_code" class="form-select" id="taxLevel" aria-label="Floating label select example">
                                <option value="SIMPLIFICADO">SIMPLIFICADO</option>
                                <option value="RESPONSABLE_DE_IVA" >RESPONSABLE DE IVA</option>
                                <option value="NO_RESPONSABLE_DE_IVA" selected>NO RESPONSABLE DE IVA</option>
                                <option value="COMUN" >COMUN</option>
                            </select>
                        </div>

                    </div>

                    <h5 class="text-muted">TIPO DE CLIENTE</h5>

                    <div class="row mb-3 gap-2">

                        <div class="col-auto">
                            <div class="form-check mt-2">
                                <input (change)="upClientForm.value.mayoreo = false; upClientForm.value.contratista = false; mayoreoCheck.checked = false; contratistaCheck.checked = false" class="form-check-input" type="checkbox" value="" id="cliente" [checked]="mayoreoCheck.checked == false && contratistaCheck.checked == false ">
                                <label class="form-check-label" for="cliente">
                                    Cliente
                                </label>
                            </div>
                        </div>

                        <div class="col-auto">
                            <div class="form-check mt-2">
                                <input (change)="upClientForm.value.contratista = false; mayoreoCheck.checked = true; contratistaCheck.checked = false" formControlName="mayoreo" class="form-check-input" type="checkbox" value="" id="mayoreo" #mayoreoCheck>
                                <label class="form-check-label" for="mayoreo">
                                    Mayoreo
                                </label>
                            </div>
                        </div>

                        <div class="col-auto">
                            <div class="form-check mt-2">
                                <input (change)="upClientForm.value.mayoreo = false; mayoreoCheck.checked = false; contratistaCheck.checked = true " formControlName="contratista" class="form-check-input" type="checkbox" value="" id="contratista" #contratistaCheck>
                                <label class="form-check-label" for="contratista">
                                    Contratista
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="row ">
                        <div class="text-danger mb-2 ">
                            <p *ngIf="campoValidoUpdate( 'name') " class="mb-1 animated fadeIn ">- El nombre es obligatorio</p>
                            <p *ngIf="campoValidoUpdate( 'cedula') " class="mb-1 animated fadeIn ">- La cedula de ciudadania es obligatoria</p>
                        </div>
                    </div>


                    <button type="submit " class="btn btnW waves-effect waves-ligth px-3 btn-primary ">Guardar</button>
                </form>

            </div>
            <div class="modal-footer ">
                <button type="button " class="btn btn-secondary" data-bs-dismiss="modal ">Cerrar</button>
            </div>
        </div>
    </div>
</div>
<!-- =========================================================================
    ACTUALIZAR CLIENTE
========================================================================= -->

<!-- =========================================================================
    LISTAR FACTURAS A CREDITOS  
========================================================================= -->
<div class="modal fade" id="credito" tabindex="-1" aria-labelledby="creditoModal" aria-hidden="true">
    <!-- <div class="modal fade" id="credito" tabindex="-1" aria-labelledby="creditoModal" aria-hidden="true"> -->
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">

                <div *ngIf="clienteCredito ">
                    <h5 class="modal-title " id="creditoModal ">
                        <i class="bi-calendar-event " style="font-size: 2rem "></i> LISTAR FACTURAS A CREDITOS
                    </h5>
                    <p class="mb-0 text-muted ">{{ clienteCredito?.name}} - {{ clienteCredito?.cedula}} </p>
                    <p class="mb-0 text-muted ">{{ clienteCredito?.phone}} </p>
                </div>

                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body ">

                <div class="d-flex flex-wrap justify-content-between gap-2 mb-3">

                    <div class="card shadow bg-warning border-0">

                        <div class="card-body text-white">
                            <h5 class="card-title mb-0 text-center">Credito</h5>
                            <h6 class="text-center"> {{ totalCredito | divisa }} </h6>
                        </div>

                    </div>

                    <div class="card shadow bg-primary border-0">

                        <div class="card-body text-white">
                            <h5 class="card-title mb-0 text-center">Abonado</h5>
                            <h6 class="text-center"> {{ totalAbonado | divisa }} </h6>
                        </div>

                    </div>

                    <div class="card shadow bg-dark border-0">

                        <div class="card-body text-white">
                            <h5 class="card-title mb-0 text-center">Restante</h5>
                            <h6 class="text-center"> {{ totalCredito - totalAbonado | divisa }} </h6>
                        </div>

                    </div>

                </div>

                <button class="btn btn-primary mb-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                    Agregar Pagos
                </button>

                <div class="collapse mb-3" id="collapseExample">

                    <!-- AGREGAR METODO DE PAGO -->
                    <div class="row g-3 d-flex justify-content-center">

                        <div class="col-auto">

                            <select class="form-select" aria-label="Default select example" (change)="typeAdd.value" #typeAdd>
                                <option value="efectivo">Efectivo</option>
                                <ng-container *ngIf="bancos.length > 0">
                                    <option *ngFor="let banco of bancos" [value]="banco.name"> {{banco.name}}</option>                                                                
                                </ng-container>
                            </select>

                        </div>

                        <div class="col-auto">
                            <label for="Descripción" class="visually-hidden">Descripción</label>
                            <input type="text" class="form-control w100" id="Descripción" placeholder="Descripción" (keyup)="descripcionAdd.value" #descripcionAdd>
                        </div>

                        <div class="col-auto">
                            <label for="monto" class="visually-hidden">Monto</label>

                            <ng-container>
                                <input type="number" class="form-control" id="monto" placeholder="Monto" autofocus="true" (keyup)="montoAdd.value" #montoAdd>
                            </ng-container>

                        </div>

                        <div class="col-auto">
                            <button type="button" class="btn btn-primary mb-3" (click)="agregarPagos(typeAdd.value, montoAdd.value, descripcionAdd.value)">Agregar</button>
                        </div>

                    </div>
                    <!-- AGREGAR METODO DE PAGO -->
                </div>

                <!-- TABLA DE FACTURAS A CREDITOS DEL CLIENTE -->
                <div class="table-responsive ">
                    <table class="table table-borderless table-striped table-hover table-sm animated fadeIn overflow-auto ">
                        <thead class="border-bottom ">
                            <tr>
                                <th class="text-muted " scope="col ">#</th>
                                <th class="text-muted " scope="col " colspan="2 ">Cliente</th>
                                <th class="text-muted " scope="col ">Cedula</th>
                                <th class="text-muted " scope="col " colspan="2 ">Ruta</th>
                                <th class="text-muted " scope="col ">Monto</th>
                                <th class="text-muted " scope="col ">Abonado</th>
                                <th class="text-muted " scope="col ">Metodo</th>
                                <th class="text-muted " scope="col ">fecha</th>
                                <th class="text-muted " scope="col "></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngIf="creditos.length===0 " class="text-center ">
                                <th colspan="10 " class="py-4 ">
                                    <h4 class="text-muted ">Este Clinte no tiene facturas a credito</h4>
                                </th>
                            </tr>

                            <ng-container *ngFor="let factura of creditos; let i=index ">

                                <tr class="trHover " tabindex="0 " data-bs-toggle="tooltip " title="Cajero: {{ factura.user.name }} ">
                                    <th>{{ factura.invoice }}</th>
                                    <td colspan="2 ">
                                        {{ factura.client.name }}
                                        <span *ngIf="!factura.status " class="badge rounded-pill bg-danger ">Cancelada</span>
                                        <span *ngIf="factura.credito && factura.status " class="badge rounded-pill bg-warning ">Credito <span *ngIf="factura.apartado" >- Apartado </span> </span>
                                    </td>
                                    <td> {{ factura.client.cedula }} </td>
                                    <td colspan="2 "> {{ factura.mesa.name }} </td>
                                    <td> {{ factura.amount | currency: 'COP' }} </td>
                                    <td> {{ factura.totalAbonado | currency: 'COP' }} </td>
                                    <td> {{ factura.type }} </td>
                                    <td> {{ factura.fecha | date:'medium' }} </td>
                                    <td class="text-center ">
                                        <a [routerLink]="[ '/dashboard/factura', factura.iid] " class="btn btn-link p-1 text-primary" data-bs-dismiss="modal" aria-label="Close"><i class="bi bi-box-arrow-up-right "></i></a>
                                    </td>
                                </tr>

                            </ng-container>

                        </tbody>
                    </table>
                </div>
                <!-- TABLA DE FACTURAS A CREDITOS DEL CLIENTE -->

            </div>
            <div class="modal-footer ">
                <button type="button " class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>
<!-- =========================================================================
    LISTAR FACTURAS A CREDITOS 
========================================================================= -->

<!-- =========================================================================
    ACTUALIZAR TODOS LOS PRODUCTOS DESDE EL EXCEL
========================================================================= -->
<div class="modal fade" id="updateExcel" tabindex="-1" aria-labelledby="updateExcelModal" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="updateExcelModal"> Subir Excel de clientes</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">

                <h4 class="text-muted">Importar Clientes <span> <a class="btn btn-sm text-primary" type="button" (click)="plantilla()" >Descargar Plantilla</a> </span></h4>

                <div class="row">
                    <div class="col-10">
                        <input type="file" class="form-control form-control-sm" (change)="incomingfile($event)" placeholder="Importar" accept=".xlsx">
                    </div>
                    <div class="col-auto">
                        <button [disabled]="sendExcel" type="button" class="btn btn-sm btnW btn-primary waves-effect waves-light mt-2" (click)="uploadExcel()">
                            <span *ngIf="!sendExcel">
                                Importar
                            </span>
                            <span *ngIf="sendExcel">
                                Enviando...                                
                            </span>
                        </button>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>